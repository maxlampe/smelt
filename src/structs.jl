

using Parameters


@with_kw mutable struct Detector
    t_meas::Float64 = 3e-7
    t_dead::Float64 = 1.5e-6
    thresh::Float64 = 1.0
    is_ready::Bool= true
    is_measuring::Bool = false
end

# {
#     0: [[-0.0028517500700467923, 4.746581935704006], [-0.002901026638267082, 5.447807628587064]],
#     1: [[-0.002940743091113191, 3.3960681547624563], [-0.003055271422226484, 3.955337763222785]],
#     2: [[-0.0033727000116902097, 4.8668411804230045], [-0.0034258013099364533, 5.270841437458705]],
#     3: [[-0.00385223105181518, 2.1763628280111837], [-0.003855350865022232, 2.600856305022912]],
#     4: [[-0.0031116518564657213, 2.777718876709862], [-0.0031825052632481854, 3.6300849725310664]],
#     5: [[-0.0030558484470537997, 4.062012290566806], [-0.0032762597959595553, 5.069433383530539]],
#     6: [[-0.0028626505704312287, 2.726368563473006], [-0.002953529149259643, 3.6652985049152393]],
#     7: [[-0.0032178577010663323, 1.8635153788486132], [-0.003253462457196932, 2.5172532382416435]],
#     8: [[-0.0029193189183406238, 3.1693475897319905], [-0.0033136563788633625, 4.317780953982196]],
#     9: [[-0.002850632316762966, 3.0325459062010762], [-0.0031382046489289513, 4.049165377095685]],
#     10: [[-0.002689041186589072, 2.9135076601334338], [-0.002949064493036308, 3.6845922356941254]],
#     11: [[-0.002230685054265584, 7.014645001737907], [-0.002678211043322195, 8.211558643838451]],
#     12: [[-0.00315279297728592, 5.538245548039395], [-0.0031813440778526076, 6.560627213401466]],
#     13: [[-0.0027730905312366516, 5.223465701982276], [-0.0027978342879662063, 6.232838881375599]],
#     14: [[-0.0036394587591868223, 3.2249828116818433], [-0.0036730661405449056, 4.444188638237656]],
#     15: [[-0.0036913414649264844, 2.970230631184754], [-0.003773330360720394, 4.465290176226738]],

# }
@with_kw mutable struct DetectorQDC
    gain::Float64 = 30.79 # 30.79
    n_pmts::Int64 = 16
    grad_c::Vector{Float64} = [
        4.746581935704006, 3.3960681547624563, 4.8668411804230045, 2.1763628280111837,
        2.777718876709862, 4.062012290566806, 2.726368563473006, 1.8635153788486132, 
        3.1693475897319905, 3.0325459062010762, 2.9135076601334338, 7.014645001737907, 
        5.538245548039395, 5.223465701982276, 3.2249828116818433, 2.970230631184754,
        ]
    grad_m::Vector{Float64} = [
        -0.0028517500700467923, -0.002940743091113191, -0.0033727000116902097, -0.00385223105181518, 
        -0.0031116518564657213, -0.0030558484470537997, -0.0028626505704312287, -0.0032178577010663323, 
        -0.0029193189183406238, -0.002850632316762966, -0.002689041186589072, -0.002230685054265584, 
        -0.00315279297728592, -0.0027730905312366516, -0.0036394587591868223, -0.0036913414649264844,
    ]
    grad_c_bs::Vector{Float64} = [
        5.447807628587064, 3.955337763222785, 5.270841437458705, 2.600856305022912, 
        3.6300849725310664, 5.069433383530539, 3.6652985049152393, 2.5172532382416435, 
        4.317780953982196, 4.049165377095685, 3.6845922356941254, 8.211558643838451, 
        6.560627213401466, 6.232838881375599, 4.444188638237656, 4.465290176226738,
    ]
    grad_m_bs::Vector{Float64} = [
        -0.002901026638267082, -0.003055271422226484, -0.0034258013099364533, -0.003855350865022232, 
        -0.0031825052632481854, -0.0032762597959595553, -0.002953529149259643, -0.003253462457196932, 
        -0.0033136563788633625, -0.0031382046489289513, -0.002949064493036308, -0.002678211043322195, 
        -0.0031813440778526076, -0.0027978342879662063, -0.0036730661405449056, -0.003773330360720394,
    ]
end


@with_kw mutable struct Event
    t_trig::Vector{Float64} = [-1., -1.]
    e_ind::Vector{Float64} = [-1., -1]
    e_raw::Float64 = -1.
    det::Int64 = -1
    n_sum::Int64 = 0
end


struct Source
    label::String
    rate::Float64
    energy::Float64
    width::Float64
    p_cor::Float64
    e_cor::Float64
    w_cor::Float64
    d_cor::Int64
    t_cor_dec::Float64
end
